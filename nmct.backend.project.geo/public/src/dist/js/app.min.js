function showErrorMsg(){jQuery(this).attr("data-popup-open");$('[data-popup="popup-1"]').fadeIn(350),$("#wrapper").toggleClass("toggled"),$("[data-popup-close]").on("click",function(e){var t=jQuery(this).attr("data-popup-close");$('[data-popup="'+t+'"]').fadeOut(350)})}function showPosition(e){var t=e.coords.latitude,r=e.coords.longitude,a={lat:t,lng:r};placeMarkerAndPanTo(a,map)}function placeMarkerAndPanTo(e,t){var r=new google.maps.Marker({position:e,map:t,draggable:!0});t.panTo(e);var a='<h1 class="iw-title">Your location!!</h1>',n=new google.maps.InfoWindow({content:a});r.addListener("click",function(){n.open(t,r)})}function showError(e){switch(e.code){case e.PERMISSION_DENIED:showErrorMsg();break;case e.POSITION_UNAVAILABLE:showErrorMsg();break;case e.TIMEOUT:showErrorMsg();break;case e.UNKNOWN_ERROR:showErrorMsg()}}var chat=function(){function e(e,r){if(void 0!==r&&null===document.getElementById(r)){var a=document.createElement("li"),n=document.createElement("div");n.setAttribute("class","chat-status"),a.appendChild(n),a.appendChild(document.createTextNode(r)),a.id=r,a.setAttribute("class","list-group-item online-users");var s=document.getElementById("users");s.appendChild(a),o[r]={currentUser:[],chatPartner:[]},t()}}function t(){var e=document.getElementsByClassName("online-users"),t=document.getElementsByClassName("sent-message")[0],a=document.getElementsByClassName("received-message")[0],n=document.getElementById("btn-send"),o=document.getElementById("selected-user");(""===chat.selectedUser||"undefined"==typeof chat.selectedUser||null===chat.selectedUser)&&n.setAttribute("disabled",!0);for(var s=0,i=e.length;i>s;s++){var l=s;!function(s){e[s].addEventListener("click",function(){chat.selectedUser=e[s].id,$(this).parent().children().removeClass("active"),$(this).addClass("active"),n.removeAttribute("disabled"),t.innerHTML="",a.innerHTML="",r(chat.selectedUser),o.innerHTML=e[s].id})}(l)}}function r(e){var t=document.getElementsByClassName("sent-message")[0],r=document.getElementsByClassName("received-message")[0];t.innerHTML="",r.innerHTML="";for(var a=0,n=o[e].currentUser.length;n>a;a++){var s=document.createElement("div");s.setAttribute("class","sent-message-box"),s.innerHTML=o[e].currentUser[a],t.appendChild(s)}for(var a=0,n=o[e].chatPartner.length;n>a;a++){var s=document.createElement("div");s.setAttribute("class","received-message-box"),s.innerHTML=o[e].chatPartner[a],r.appendChild(s)}}function a(e,t){document.getElementById(t).remove()}var n,o=[];return{addUser:e,deleteUser:a,selectedUser:n,messages:o,addMessageToChat:r}}(),Sha1={};Sha1.hash=function(e){e=e.utf8Encode();var t=[1518500249,1859775393,2400959708,3395469782];e+=String.fromCharCode(128);for(var r=e.length/4+2,a=Math.ceil(r/16),n=new Array(a),o=0;a>o;o++){n[o]=new Array(16);for(var s=0;16>s;s++)n[o][s]=e.charCodeAt(64*o+4*s)<<24|e.charCodeAt(64*o+4*s+1)<<16|e.charCodeAt(64*o+4*s+2)<<8|e.charCodeAt(64*o+4*s+3)}n[a-1][14]=8*(e.length-1)/Math.pow(2,32),n[a-1][14]=Math.floor(n[a-1][14]),n[a-1][15]=8*(e.length-1)&4294967295;for(var i,l,c,d,u,p=1732584193,g=4023233417,m=2562383102,h=271733878,f=3285377520,v=new Array(80),o=0;a>o;o++){for(var y=0;16>y;y++)v[y]=n[o][y];for(var y=16;80>y;y++)v[y]=Sha1.ROTL(v[y-3]^v[y-8]^v[y-14]^v[y-16],1);i=p,l=g,c=m,d=h,u=f;for(var y=0;80>y;y++){var S=Math.floor(y/20),M=Sha1.ROTL(i,5)+Sha1.f(S,l,c,d)+u+t[S]+v[y]&4294967295;u=d,d=c,c=Sha1.ROTL(l,30),l=i,i=M}p=p+i&4294967295,g=g+l&4294967295,m=m+c&4294967295,h=h+d&4294967295,f=f+u&4294967295}return Sha1.toHexStr(p)+Sha1.toHexStr(g)+Sha1.toHexStr(m)+Sha1.toHexStr(h)+Sha1.toHexStr(f)},Sha1.f=function(e,t,r,a){switch(e){case 0:return t&r^~t&a;case 1:return t^r^a;case 2:return t&r^t&a^r&a;case 3:return t^r^a}},Sha1.ROTL=function(e,t){return e<<t|e>>>32-t},Sha1.toHexStr=function(e){for(var t,r="",a=7;a>=0;a--)t=e>>>4*a&15,r+=t.toString(16);return r},"undefined"==typeof String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),"undefined"==typeof String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(e){return this}}),"undefined"!=typeof module&&module.exports&&(module.exports=Sha1),"function"==typeof define&&define.amd&&define([],function(){return Sha1});var mapType=function(){"use strict";return{changeMapType:function(e){switch(e){case"hybrid":map.setMapTypeId(google.maps.MapTypeId.HYBRID);break;case"roadmap":map.setMapTypeId(google.maps.MapTypeId.ROADMAP);break;case"satellite":map.setMapTypeId(google.maps.MapTypeId.SATELLITE);break;case"terrain":map.setMapTypeId(google.maps.MapTypeId.TERRAIN);break;default:map.setMapTypeId(google.maps.MapTypeId.ROADMAP)}}}}(),activityModel={id:"",activityName:"",author:"",feeling:"",latitude:"",longitude:"",timestamp:""},shareModel={id:"",ShareName:"",author:"",feeling:"",latitude:"",longitude:"",timestamp:"",activityId:""},allSignedShares=[[]],allUnsignedShares=[];!function(){google.maps.event.addDomListener(window,"load",createMap.initialize("map-canvas")),google.maps.event.addDomListener(window,"resize",function(){var e=map.getCenter();google.maps.event.trigger(map,"resize"),map.setCenter(e)});var e=angular.module("app",["ngRoute","ngCookies"]);e.config(["$logProvider","$routeProvider",function(e,t){e.debugEnabled(!0),t.when("/",{controller:"LoginController",controllerAs:"login",templateUrl:"./templates/login.html"}).when("/register",{controller:"RegisterController",controllerAs:"register",templateUrl:"./templates/register.html"}).when("/main",{controller:"MainController",controllerAs:"main",templateUrl:"./templates/main.html",resolve:{addUsers:function(){}}}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location","$cookies",function(e,t,r){e.$on("$routeChangeStart",function(r,a,n){e.loggedInUser||"./templates/main.html"===a.templateUrl&&t.path("/")})}]),createMap.getData()}(),function(){var e=angular.module("app"),t=function(e,t,r,a){e.isAdmin=void 0!==localStorage.isAmin&&localStorage.isAdmin?!0:!1,e.userLogin=function(){r.loggedInUser=null,client.login(e.username,e.password,function(t,n){t?console.log(t):(a.put("user",e.username),r.loggedInUser=e.username,localStorage.username=e.username,location.href="/#/main")})}};e.controller("LoginController",["$scope","$location","$rootScope","$cookies",t])}();var directives=angular.module("app");directives.directive("passwordToggle",["$compile",function(e){return{restrict:"A",scope:{},link:function(t,r,a){t.tgl=function(){r.attr("type","text"===r.attr("type")?"password":"text")};var n=angular.element('<a data-ng-click="tgl()">Toggle</a>');e(n)(t),r.wrap('<div class="password-toggle"/>').after(n)}}}]);var directives=angular.module("app");directives.directive("showtab",function(){return{link:function(e,t,r){t.click(function(e){e.preventDefault(),$(t).tab("show")})}}}),function(){"use strict";navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition,showError):showError(error)}();